(this.webpackJsonpkidzania=this.webpackJsonpkidzania||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/logo1.cefc0674.svg"},26:function(e,t,a){e.exports=a(40)},31:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),s=a(16),r=a.n(s),c=(a(31),a(17)),o=a(18),i=a(24),m=a(19),d=a(9),u=a(25),p=a(42),E=a(43),v=a(20),f=a.n(v),g=a(6),h=a(8),b=a(0),y=a(21),N=a(22),w=a(23),k=a.n(w),z=a(7),q=a.n(z),x=a(3),S=a.n(x),C=(a(36),a(37),a(38),a(39),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={step_no:"1. - ",step_cont:"Elige el d\xeda de tu visita.",today:new Date,loading:!0,dating:{date:"",name:"",tel:"",email:"",age:"",city:""},un_dates:[]},a.animateStep=function(e){window.scrollTo(0,0),S()(".stepper-rad:eq("+(e-1)+")").addClass("completed-step");var t=S()(".body-cont:eq("+(e-1)+")"),a=S()(".body-cont:eq("+e+")");setTimeout((function(){t.css("display","none"),a.css("display","block"),a.css("opacity",1)}),500),t.css("opacity",0),a.css("opacity",0)},a.reverseStep=function(e){var t=S()(".body-cont:eq("+(e-1)+")"),n=S()(".body-cont:eq("+e+")");setTimeout((function(){n.css("display","none"),t.css("display","block"),t.css("opacity",1),window.scrollTo(0,0),S()(".stepper-rad:eq("+(e-1)+")").removeClass("completed-step")}),500),n.css("opacity",0),t.css("opacity",0),a.setState({step_no:"1. - ",step_cont:"Elige el d\xeda de tu visita."})},a.changeStep=function(e,t){t.preventDefault();var n=Object(d.a)(a);switch(e){case 1:""===a.state.dating.date?q()({title:"\xa1Espera!",text:"Olvidaste seleccionar una fecha",icon:"warning"}):(a.setState({step_no:"2. - ",step_cont:"Cu\xe9ntanos un poco sobre ti."}),a.animateStep(e));break;case 2:a.setState({loading:!0}),S()(".stepper-rad:eq("+(e-1)+")").addClass("completed-step"),a.getFormData(S()("#kz-form")),setTimeout((function(){fetch("https://webservicesnt.org:4443/kidzania",{method:"POST",body:JSON.stringify({type:"insert",data:n.state.dating}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){1===t.result?q()({title:"\xa1Excelente!",text:"Tu cita ha sido registrada correctamente",icon:"success"}).then((function(){window.location.reload()})):q()({title:"\xa1Lo sentimos!",text:"Ha ocurrido un error durante el registro, porfavor reintenta",icon:"error"}).then((function(){S()(".stepper-rad:eq("+(e-1)+")").removeClass("completed-step"),n.setState({loading:!1})}))}))}),500)}},a.getFormData=function(e){var t=e.serializeArray(),n=a.state.dating;S.a.map(t,(function(e,t){n[e.name]=e.value})),a.setState({dating:n})},a.formatDate=function(e){var t=e,a=""+(t.getMonth()+1),n=""+t.getDate(),l=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[l,a,n].join("-")},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this;fetch("https://webservicesnt.org:4443/kidzania",{method:"POST",body:JSON.stringify({type:"get"}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){if(1===a.result){for(var n=0;n<a.data.length;n++)a.data[n].title="No disponible",a.data[n].editable=!1,a.data[n].classNames=["unable-date"];e.setState({loading:!1,un_dates:a.data});var l=document.getElementById("calendar-cont"),s=new b.a(l,{plugins:[N.a,y.a],locale:k.a,header:{left:"",center:"title",right:"today prev,next"},events:e.state.un_dates,validRange:{start:e.formatDate(e.state.today)},defaultView:S()(window).width()<765?"dayGridWeek":"dayGridMonth",selectable:!0,droppable:!0,dateClick:function(e){for(var a=!0,n=0;n<t.state.un_dates.length;n++)if(console.log(t.state.un_dates[n]),e.dateStr===t.state.un_dates[n].start)return a=!1,0;if(a){var l=t.state.dating;l.date=e.dateStr,t.setState({dating:l});var r=s.getEventById("myvisit");null!=r&&r.remove(),s.addEvent({id:"myvisit",title:"Mi visita",start:e.dateStr,classNames:["selected-date"],allDay:!0})}}});s.render()}else q()({title:"\xa1Lo sentimos!",text:"Ha ocurrido un error al cargar las fechas, porfavor reintenta",icon:"error"}).then((function(){window.location.reload()}))}))}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{className:"nav"},l.a.createElement(E.a,{xs:"12"},l.a.createElement(p.a,null,l.a.createElement(E.a,{xs:"3",sm:"3",md:"2",lg:"1"},l.a.createElement("img",{className:"kz-nav-logo",src:f.a})),l.a.createElement(E.a,{xs:"9",sm:"9",md:"10",lg:"11"},l.a.createElement("span",{className:"nav-item"},"Agendar mi visita"))))),l.a.createElement(p.a,null,l.a.createElement(E.a,{xs:"12",lg:{size:10,offset:1}},l.a.createElement("p",{className:"date-title"},"Completa los siguientes pasos y reserva tu lugar \xa1Ahora!"),l.a.createElement("div",{className:"stepper-cont"},l.a.createElement("div",{className:"stepper-line"}),l.a.createElement("div",{className:"stepper-step"},l.a.createElement("div",{className:"stepper-rad"},l.a.createElement(g.a,{icon:h.b}))),l.a.createElement("div",{className:"stepper-step"},l.a.createElement("div",{className:"stepper-rad"},l.a.createElement(g.a,{icon:h.c})))),!this.state.loading&&l.a.createElement(n.Fragment,null,l.a.createElement("p",{className:"date-subtitle"},this.state.step_no,l.a.createElement("span",{className:"date-content"},this.state.step_cont)),l.a.createElement("div",{className:"bodies-cont"},l.a.createElement("div",{className:"body-cont"},l.a.createElement("div",{id:"calendar-cont"}),l.a.createElement(p.a,{className:"row-div"},l.a.createElement(E.a,{xs:"12",className:"row-div-r"},l.a.createElement("button",{className:"kz-btn",onClick:function(t){return e.changeStep(1,t)}},"Continuar ",l.a.createElement(g.a,{icon:h.a}))))),l.a.createElement("div",{className:"body-cont"},l.a.createElement("form",{id:"kz-form",onSubmit:function(t){return e.changeStep(2,t)}},l.a.createElement(p.a,null,l.a.createElement(E.a,{sm:"12",className:"form-row"},l.a.createElement("label",{className:"kz-label",htmlFor:"name"},"\xbfCu\xe1l es tu nombre?",l.a.createElement("span",{className:"required-field"},"*")),l.a.createElement("input",{className:"kz-input",type:"text",pattern:"([A-z0-9\xc0-\u017e\\s]){2,30}",name:"name",required:!0}))),l.a.createElement(p.a,null,l.a.createElement(E.a,{sm:"12",lg:"6",className:"form-row"},l.a.createElement("label",{className:"kz-label",htmlFor:"age"},"\xbfCu\xe1ntos a\xf1os tienes?",l.a.createElement("span",{className:"required-field"},"*")),l.a.createElement("input",{className:"kz-input",type:"number",max:"99",min:"1",name:"age",required:!0})),l.a.createElement(E.a,{sm:"12",lg:"6",className:"form-row"},l.a.createElement("label",{className:"kz-label",htmlFor:"city"},"\xbfEn qu\xe9 ciudad te encuentras?",l.a.createElement("span",{className:"required-field"},"*")),l.a.createElement("input",{className:"kz-input",type:"text",maxLength:"50",pattern:"([A-z0-9\xc0-\u017e\\s]){2,30}",name:"city",required:!0}))),l.a.createElement(p.a,null,l.a.createElement(E.a,{sm:"12",className:"form-row"},l.a.createElement("label",{className:"kz-label",htmlFor:"email"},"\xbfCu\xe1l es tu correo electr\xf3nico",l.a.createElement("span",{className:"required-field"},"*")),l.a.createElement("input",{className:"kz-input",type:"email",name:"email",required:!0}))),l.a.createElement(p.a,null,l.a.createElement(E.a,{sm:"12",className:"form-row"},l.a.createElement("label",{className:"kz-label",htmlFor:"tel"},"\xbfCu\xe1l es tu n\xfamero telef\xf3nico?",l.a.createElement("span",{className:"required-field"},"*")),l.a.createElement("input",{className:"kz-input",type:"tel",pattern:"[0-9 -]{9,15}",name:"tel",required:!0}))),l.a.createElement(p.a,null,l.a.createElement(E.a,{sm:"12",className:"form-row"},l.a.createElement("label",{className:"kz-label",htmlFor:"comment"},"D\xe9janos alg\xfan comentario adicional"),l.a.createElement("textarea",{className:"kz-input",type:"text",name:"comment",maxLength:"250",rows:"3",placeholder:"Escribe aqu\xed lo que quieras"}))),l.a.createElement(p.a,{className:"row-div"},l.a.createElement(E.a,{xs:"6",className:"row-div-l"},l.a.createElement("button",{className:"kz-btn",onClick:function(t){return e.reverseStep(1)}},"Volver")),l.a.createElement(E.a,{xs:"6",className:"row-div-r"},l.a.createElement("button",{className:"kz-btn",type:"submit"},"Continuar ",l.a.createElement(g.a,{icon:h.a})))))))),this.state.loading&&l.a.createElement("div",{class:"lds-roller"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.384de795.chunk.js.map